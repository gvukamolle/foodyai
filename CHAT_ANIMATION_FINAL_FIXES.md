# –§–∏–Ω–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ —á–∞—Ç–∞
## –î–∞—Ç–∞: 08.08.2025
## –í—ã–ø–æ–ª–Ω–∏–ª: Senior Kotlin Developer

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

## 1. –ü—Ä–æ–±–ª–µ–º–∞ "–≤–∑–ª–µ—Ç–∞—é—â–∏—Ö" —Å–æ–æ–±—â–µ–Ω–∏–π
### –ß—Ç–æ –±—ã–ª–æ:
- –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø—É—Å—Ç–æ–º –∏–ª–∏ –º–∞–ª–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–º —á–∞—Ç–µ, —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–ª–æ—Å—å —Å–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ –∏ "–≤–∑–ª–µ—Ç–∞–ª–æ" –Ω–∞ —Å–≤–æ–µ –º–µ—Å—Ç–æ
- –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–µ–∂–¥—É `animateItemPlacement` –∏ –∞–Ω–∏–º–∞—Ü–∏–µ–π –ø–æ—è–≤–ª–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ:
- ‚úÖ **–£–¥–∞–ª–µ–Ω `animateItemPlacement`** –∏–∑ LazyColumn items
- –¢–µ–ø–µ—Ä—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–≤–æ–µ–º –º–µ—Å—Ç–µ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Ä–∞–∑–º—ã—Ç–∏—è, –±–µ–∑ –ª–∏—à–Ω–∏—Ö –¥–≤–∏–∂–µ–Ω–∏–π

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
```kotlin
// –ë—ã–ª–æ:
AnimatedMessageWithBlur(
    modifier = Modifier.animateItemPlacement(
        animationSpec = tween(300)
    ),
    ...
)

// –°—Ç–∞–ª–æ:
AnimatedMessageWithBlur(
    // –ë–µ–∑ animateItemPlacement
    id = message.id,
    isVisible = message.isVisible,
    playAnimation = message.animate,
    ...
)
```

## 2. –î–µ—Ä–≥–∞–Ω–∞—è –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞
### –ß—Ç–æ –±—ã–ª–æ:
- –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ, –ø–æ–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –µ—â–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–ª–æ—Å—å
- –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –ø–æ—è–≤–ª–µ–Ω–∏—è
- –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –¥–∞–∂–µ –∫–æ–≥–¥–∞ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ –≤–∏–¥–Ω—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ

### –†–µ—à–µ–Ω–∏–µ:
- ‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞** –ø–µ—Ä–µ–¥ –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π —Å 100ms –¥–æ 500ms
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏**:
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –≤–∏–¥–∏–º –ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é
  - –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —á—Ç–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å
- ‚úÖ **–£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏**:
  - –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–µ–∫—Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–∏–¥–∏–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
  - –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ–≥–æ –ø–æ–∑–∏—Ü–∏—é –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫—Ä–∞—è —ç–∫—Ä–∞–Ω–∞
  - –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
```kotlin
// –ë—ã–ª–æ:
LaunchedEffect(viewModel.messages) {
    if (viewModel.messages.isNotEmpty()) {
        delay(100)
        listState.animateScrollToItem(
            index = messagesToDisplay.size - 1,
            scrollOffset = 0
        )
    }
}

// –°—Ç–∞–ª–æ:
LaunchedEffect(viewModel.messages) {
    if (viewModel.messages.isNotEmpty()) {
        // ... —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π ...
        
        if (messagesToDisplay.isNotEmpty()) {
            // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è
            delay(500)
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            val lastVisibleItemIndex = listState.layoutInfo.visibleItemsInfo.lastOrNull()?.index ?: 0
            val totalItems = messagesToDisplay.size - 1
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–∏–¥–∏–º
            if (lastVisibleItemIndex < totalItems || 
                (listState.layoutInfo.visibleItemsInfo.lastOrNull()?.offset ?: 0) > 0) {
                listState.animateScrollToItem(
                    index = totalItems,
                    scrollOffset = 0
                )
            }
        }
    }
}
```

## 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–º–ø–æ—Ä—Ç `ExperimentalFoundationApi`
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@OptIn(ExperimentalFoundationApi::class)`

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
### ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. **–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ** - –±–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∞ "–≤–∑–ª–µ—Ç–∞" —Å–Ω–∏–∑—É
2. **–ü–ª–∞–≤–Ω–∞—è –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞** - —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —É–±—Ä–∞–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏
4. **–ß–∏—Å—Ç—ã–π –∫–æ–¥** - —É–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏

### üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `/app/src/main/java/com/example/calorietracker/pages/AnimatedMainScreen.kt`

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. **–¢–µ—Å—Ç —Å –ø—É—Å—Ç—ã–º —á–∞—Ç–æ–º**: –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ
2. **–¢–µ—Å—Ç —Å –º–∞–ª—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π**: –î–æ–±–∞–≤—å—Ç–µ 2-3 —Å–æ–æ–±—â–µ–Ω–∏—è, –æ–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã "–≤–∑–ª–µ—Ç–∞—Ç—å"
3. **–¢–µ—Å—Ç —Å –ø–æ–ª–Ω—ã–º —á–∞—Ç–æ–º**: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —á–∞—Ç –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–∫—Ä–æ–ª–ª–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–ª–∞–≤–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∏
4. **–¢–µ—Å—Ç –±—ã—Å—Ç—Ä–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏**: –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–¥—Ä—è–¥ –±—ã—Å—Ç—Ä–æ

## –°—Ç–∞—Ç—É—Å: ‚úÖ –í—Å–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!